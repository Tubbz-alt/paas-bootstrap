---
releases:
  - name: syslog
    version: "11.3.2"
    url: https://bosh.io/d/github.com/cloudfoundry/syslog-release?v=11.3.2
    sha1: 64cf40d44746b50edffa78cb0e0dd6f072fee695

addons:
  - name: syslog_forwarder
    jobs:
      - name: syslog_forwarder
        release: syslog
        properties:
          syslog:
            address: (( grab meta.logit.syslog_address ))
            port: (( grab meta.logit.syslog_port ))
            transport: 'tcp'
            tls_enabled: true
            ca_cert: (( grab meta.logit.ca_cert ))
            permitted_peer: "*.logit.io"
            custom_rule: |
              $MaxMessageSize 64k
              if ($programname startswith "vcap.") then stop
            use_tcp_for_file_forwarding_local_transport: true
